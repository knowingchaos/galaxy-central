<tool id="multirepeat" name="multirepeat">
    <description>tail-to-head</description>
    <command>
        cat $input1 #for $q in $queries# ${q.input2} #end for# #for $q in $more_queries# ${q.more_queries_input} #end for# > $out_file1
    </command>
    <inputs>
        <param name="input1" type="data" label="Concatenate Dataset"/>
        <repeat name="queries" title="Dataset">
            <param name="input2" type="data" label="Select" />
        </repeat>
        <repeat name="more_queries" title="Dataset">
            <param name="more_queries_input" type="data" label="Select" />
        </repeat>        
    </inputs>
    <outputs>
        <data name="out_file1" format="input" metadata_source="input1"/>
    </outputs>
    <tests>
        <test>
            <param name="input1" value="simple_line.txt"/>
            <param name="input2" value="simple_line.txt"/>
            <output name="out_file1" file="simple_line_x2.txt"/>
        </test>
        <test>
            <param name="input1" value="simple_line.txt"/>
            <param name="input2" value="simple_line.txt"/>
            <param name="input2" value="simple_line.txt"/>
            <output name="out_file1" file="simple_line_x3.txt"/>
        </test>
        <test>
            <param name="input1" value="simple_line.txt"/>
            <param name="input2" value="simple_line.txt"/>
            <param name="input2" value="simple_line.txt"/>
            <param name="more_queries_input" value="simple_line.txt"/>
            <param name="more_queries_input" value="simple_line.txt"/>            
            <output name="out_file1" file="simple_line_x5.txt"/>
        </test>
    </tests>
</tool>
